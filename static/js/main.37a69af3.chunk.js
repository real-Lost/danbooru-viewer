(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{19:function(e,t,n){e.exports=n(49)},25:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(16),c=n.n(i),o=(n(25),n(18)),s=n(3),l=n(4),u=n(6),m=n(5),d=n(2),h=n(7),g=n(17),p=n.n(g),b=n(8),f=n.n(b),v=(n(45),n(46),function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=(e.posts,e.imgUrl);e.currentIndex;return r.a.createElement("div",{className:"image-item card"},r.a.createElement("div",{className:"image-container"},r.a.createElement("img",{src:t,className:"card-img-top"})),r.a.createElement("div",{className:"card-body"},r.a.createElement("p",{className:"card-text"},"more info here")))}}]),t}(a.Component)),I=(n(47),function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).postsToCards=n.postsToCards.bind(Object(d.a)(n)),n.imageClick=n.imageClick.bind(Object(d.a)(n)),n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"imageClick",value:function(e){console.log(e.currentTarget),this.props.changeToViewer(e.currentTarget.id)}},{key:"postsToCards",value:function(){var e=this;return this.props.posts.map(function(t,n){return r.a.createElement("li",{key:n+1,className:"image-container",onClick:e.imageClick,id:n+1},r.a.createElement("img",{className:"card-img-top",src:t.large_file_url}))})}},{key:"render",value:function(){this.props.posts;return r.a.createElement("ul",{className:"container"},this.postsToCards())}}]),t}(a.Component)),j=(n(48),function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.prevImage,n=e.nextImage;return r.a.createElement("div",{className:"controls"},r.a.createElement("button",{onClick:t},"Prev"),r.a.createElement("button",{onClick:n},"Next"))}}]),t}(a.Component)),O=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={currentIndex:0,listView:!0,posts:[],currentPage:0,distanceFromBottom:99999},n.nextImage=n.nextImage.bind(Object(d.a)(n)),n.prevImage=n.prevImage.bind(Object(d.a)(n)),n.handleScroll=n.handleScroll.bind(Object(d.a)(n)),n.changeToViewer=n.changeToViewer.bind(Object(d.a)(n)),n.loadData=n.loadData.bind(Object(d.a)(n)),n.testImage=n.testImage.bind(Object(d.a)(n)),n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.loadData(),window.addEventListener("scroll",this.handleScroll),f.a.bind(["a"],this.prevImage),f.a.bind(["d"],this.nextImage),f.a.bind(["esc"],function(){return e.setState(function(e){return{listView:!0}})})}},{key:"componentWillUnmount",value:function(){var e=this;f.a.unbind(["a"],this.prevImage),f.a.unbind(["d"],this.nextImage),f.a.unbind(["esc"],function(){return e.setState(function(e){return{listView:!0}})})}},{key:"handleScroll",value:function(e){1*(document.documentElement.scrollHeight-document.documentElement.scrollTop)<2e3&&this.state.listView&&this.loadData()}},{key:"loadData",value:function(){var e=this;this.state.currentPage++,p.a.get("https://danbooru.donmai.us/posts.json?page=".concat(this.state.currentPage)).then(function(t){t.data.forEach(function(t){e.testImage(t)})})}},{key:"testImage",value:function(e){var t=this,n=new Image;n.onload=function(){t.setState(function(t,n){return{posts:[].concat(Object(o.a)(t.posts),[e])}})},n.onerror=function(){},n.src=e.large_file_url}},{key:"changeToViewer",value:function(e){this.setState(function(t,n){return{currentIndex:e-1,listView:!1}})}},{key:"nextImage",value:function(){this.state.currentIndex==this.state.posts.length-1?this.loadData():this.setState(function(e,t){return{currentIndex:++e.currentIndex}})}},{key:"prevImage",value:function(){0==this.state.currentIndex?console.log("cant go any further"):this.setState(function(e,t){return{currentIndex:--e.currentIndex}})}},{key:"render",value:function(){return this.state.listView?r.a.createElement("div",null,r.a.createElement("button",{onClick:this.loadData},"More"),r.a.createElement(I,{posts:this.state.posts,changeToViewer:this.changeToViewer})):r.a.createElement("div",null,r.a.createElement(v,{imgUrl:this.state.posts[this.state.currentIndex].large_file_url}),r.a.createElement(j,{prevImage:this.prevImage,nextImage:this.nextImage}),r.a.createElement("button",{onClick:this.loadData},"More"))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(O,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[19,1,2]]]);
//# sourceMappingURL=main.37a69af3.chunk.js.map